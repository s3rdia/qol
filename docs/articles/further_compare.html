<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>A Further Comparison Of qol And SAS • qol</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A Further Comparison Of qol And SAS">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">qol</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/further_compare.html">A Further Comparison Of qol And SAS</a></li>
    <li><a class="dropdown-item" href="../articles/SAS_compare.html">How Does qol Compare to SAS?</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/s3rdia/qol/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>A Further Comparison Of qol And SAS</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/s3rdia/qol/blob/HEAD/vignettes/articles/further_compare.Rmd" class="external-link"><code>vignettes/articles/further_compare.Rmd</code></a></small>
      <div class="d-none name"><code>further_compare.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="more-than-just-if">More Than Just ‘if’<a class="anchor" aria-label="anchor" href="#more-than-just-if"></a>
</h2>
<p>SAS makes use of if-statements like most other languages do. The most
common use case should be to generate a new variable or to be more
specific: to assign a value to a variable conditionally. Inside a
Data-Step you can write single if-statements or connect multiple to a
whole block. You can also make use of ‘else if’, which is only executed,
if no other if-condition from before was true. And there is ‘else’ which
is executed, if no other condition in a block became true.</p>
<p>Here is a simple if-block in a SAS Data-Step, which is used to
generate groups of ages:</p>
<pre class="sas"><code>Data Work.MyData_AgeGr;
    Set Work.MyData;

             If       Age &lt; 18 Then AgeGr = 1;
        Else If 18 &lt;= Age &lt; 25 Then AgeGr = 2;
        Else If 25 &lt;= Age &lt; 55 Then AgeGr = 3;
        Else If 55 &lt;= Age &lt; 65 Then AgeGr = 4;
        Else                        AgeGr = 5;

Run;</code></pre>
<p>The equivalent in R looks like this:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MyData_AgeGr</span> <span class="op">&lt;-</span> <span class="va">MyData</span> <span class="op">|&gt;</span> </span>
<span>         <span class="fu"><a href="../reference/if_else.html">if.</a></span><span class="op">(</span><span class="va">Age</span> <span class="op">&lt;</span> <span class="fl">18</span>,             AgeGr <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/if_else.html">else_if.</a></span><span class="op">(</span><span class="va">Age</span> <span class="op">&gt;=</span> <span class="fl">18</span> <span class="op">&amp;</span> <span class="va">Age</span> <span class="op">&lt;</span> <span class="fl">25</span>, AgeGr <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/if_else.html">else_if.</a></span><span class="op">(</span><span class="va">Age</span> <span class="op">&gt;=</span> <span class="fl">25</span> <span class="op">&amp;</span> <span class="va">Age</span> <span class="op">&lt;</span> <span class="fl">55</span>, AgeGr <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/if_else.html">else_if.</a></span><span class="op">(</span><span class="va">Age</span> <span class="op">&gt;=</span> <span class="fl">55</span> <span class="op">&amp;</span> <span class="va">Age</span> <span class="op">&lt;</span> <span class="fl">65</span>, AgeGr <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/if_else.html">else.</a></span>   <span class="op">(</span>                      AgeGr <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p>In SAS you can do more than just conditionally assigning a value to a
variable with an if-statement. If you use the condition with ‘Then Do’,
you can generate multiple variables like this:</p>
<pre class="sas"><code>Data Work.MyData_Do;
    Set Work.MyData;

        If a &lt; 100 Then Do;

            b = 1;
            c = "Hello";
            d = 42;

        End;

Run;</code></pre>
<p>With the qol-Package you can write:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MyData_Do</span> <span class="op">&lt;-</span> <span class="va">MyData</span> <span class="op">|&gt;</span> </span>
<span>         <span class="fu"><a href="../reference/if_else.html">if.</a></span><span class="op">(</span><span class="va">a</span> <span class="op">&lt;</span> <span class="fl">100</span>, b <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                      c <span class="op">=</span> <span class="st">"Hello"</span>,</span>
<span>                      d <span class="op">=</span> <span class="fl">42</span><span class="op">)</span></span></code></pre></div>
<p>In both programs you can also connect further ‘else if’ and
‘else’-statements. And there is yet another function ‘if’ can do in SAS:
you can use it to filter observations. This function takes action, if
only the condition without any ‘Then’ is provided like this:</p>
<pre class="sas"><code>Data Work.MyData_If;
    Set Work.MyData;

        /* Which means: only keep the observations,
           which are true on the following condition. */
        If Age &gt; 65;

Run;</code></pre>
<p>The new <code><a href="../reference/if_else.html">if.()</a></code> makes this possible, too:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MyData_If</span> <span class="op">&lt;-</span> <span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/if_else.html">if.</a></span><span class="op">(</span><span class="va">Age</span> <span class="op">&gt;</span> <span class="fl">65</span><span class="op">)</span></span></code></pre></div>
<p>Simple, readable and multi-functional.</p>
</div>
<div class="section level2">
<h2 id="recoding-with-formats">Recoding With Formats<a class="anchor" aria-label="anchor" href="#recoding-with-formats"></a>
</h2>
<p>Normally, if you want to recode a variable into new categories, you
would probably do it with if-statements as seen above. With SAS formats
you can achieve the same, just simpler and more readable:</p>
<pre class="sas"><code>Proc Format Library = Work;

    Value AgeGroup
        00 - 17 = 'under 18'
        18 - 24 = '18 to under 25'
        25 - 54 = '25 to under 55'
        55 - 64 = '55 to under 65'
        65 - 99 = '65 and older';

Run;

Data Work.MyData_Recode;
    Set Work.MyData;

        AgeGr = Put(Age, AgeGroup.);

Run;</code></pre>
<p>Now you can do the same in R with <code><a href="../reference/recode.html">recode()</a></code> just as
easy:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">AgeGroup.</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/formats.html">discrete_format</a></span><span class="op">(</span></span>
<span>    <span class="st">"under 18"</span>       <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">17</span>,</span>
<span>    <span class="st">"18 to under 25"</span> <span class="op">=</span> <span class="fl">18</span><span class="op">:</span><span class="fl">24</span>,</span>
<span>    <span class="st">"25 to under 55"</span> <span class="op">=</span> <span class="fl">25</span><span class="op">:</span><span class="fl">54</span>,</span>
<span>    <span class="st">"55 to under 65"</span> <span class="op">=</span> <span class="fl">55</span><span class="op">:</span><span class="fl">64</span>,</span>
<span>    <span class="st">"65 and older"</span>   <span class="op">=</span> <span class="fl">65</span><span class="op">:</span><span class="fl">99</span><span class="op">)</span></span>
<span></span>
<span><span class="va">MyData_Recode</span> <span class="op">&lt;-</span> <span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/recode.html">recode</a></span><span class="op">(</span><span class="st">"AgeGr"</span>, Age <span class="op">=</span> <span class="st">"AgeGroup."</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-world-of-retain">The World Of Retain<a class="anchor" aria-label="anchor" href="#the-world-of-retain"></a>
</h2>
<p>On a very basic level ‘Retain’ can do two things, depending on the
position in the SAS code: It can either sort variables column wise or it
can - since it works row wise - remember a value from one row to the
next. The newly implemented functions concentrate on the second part.
Remembering a value from a previous observation offers multiple use
cases. E.g. always adding +1 to the previous case creates a running
number or adding different values can create a cumulative sum:</p>
<pre class="sas"><code>Data Work.MyData_Retain;
    Set Work.MyData;

        Retain RunningNr 0 CumulativeIncome 0;

        RunningNr = RunningNr + 1;
        CumulativeIncome = CumulativeIncome + Income;

Run;</code></pre>
<p>qol doesn’t mimic the behavior of ‘Retain’, but rather the
result:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MyData_Retain</span> <span class="op">&lt;-</span> <span class="va">MyData</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/retain.html">running_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="../reference/retain.html">retain_sum</a></span><span class="op">(</span>var_name <span class="op">=</span> <span class="st">"CumulativeIncome"</span>, value <span class="op">=</span> <span class="va">income</span><span class="op">)</span></span></code></pre></div>
<p>In it’s simplest form it can remember a value from the first
observation and transfer it to all other observations:</p>
<pre class="sas"><code>Data Work.MyData_Value;
    Set Work.MyData;

        Retain MyValue 0;

        If _n_ = 1 Then MyValue = Income;

Run;</code></pre>
<p>qol does it like this:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MyData_Running</span> <span class="op">&lt;-</span> <span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/retain.html">retain_value</a></span><span class="op">(</span>var_name <span class="op">=</span> <span class="st">"MyValue"</span>, value <span class="op">=</span> <span class="va">income</span><span class="op">)</span></span></code></pre></div>
<p>Not directly ‘Retain’ related, but also useful: If an observation
knows the value of the previous one, it can check whether it is of the
same value or another, e.g. to mark first or last cases within a
group.</p>
<pre class="sas"><code>Data Work.MyData_FirstLast;
    Set Work.MyData;

        By AgeGr;
    
            If First.AgeGr Then FirstCase = 1;
            If Last.AgeGr  Then LastCase  = 1;

Run;</code></pre>
<p>qol creates this effect like this:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MyData_FirstLast</span> <span class="op">&lt;-</span> <span class="va">MyData</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/retain.html">mark_case</a></span><span class="op">(</span>var_name <span class="op">=</span> <span class="st">"FirstCase"</span>, by <span class="op">=</span> <span class="va">AgeGr</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="../reference/retain.html">mark_case</a></span><span class="op">(</span>var_name <span class="op">=</span> <span class="st">"LastCase"</span>,  by <span class="op">=</span> <span class="va">AgeGr</span>, first <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>All of these functions work on the whole data frame as well as on
groups, e.g. to transfer a value from the first person in a household to
all other persons of the same household.</p>
</div>
<div class="section level2">
<h2 id="join-them-all">Join Them All<a class="anchor" aria-label="anchor" href="#join-them-all"></a>
</h2>
<p>In a SAS Data-Step you can join multiple datasets together in a
single operation using ‘Merge’ with a very basic syntax. Provide the
dataset names, the variables, on which they should be joined and after a
full join is complete, the user can decide which parts of the joins
should remain in the final dataset:</p>
<pre class="sas"><code>Data Work.MyData_Merged;
    Merge Work.MyData_A (in = a)
          Work.MyData_B (in = b)
          Work.MyData_C;

        By a b c d e;
          
          /* Here are examples of how the different joins can be selected,
             making use of the above assigned in-variables. */
          If a;             /* left join */
          If b;             /* right join */
          If a And b;       /* inner join */
          If Not (a And b); /* outer join */
          If a and Not b;   /* left inner join */
          If Not a And b;   /* right inner join */
                            /* full join happens if no selection is specified */

Run;</code></pre>
<p>The R equivalent <code><a href="../reference/multi_join.html">multi_join()</a></code> tries to keep the
simplicity, while giving the user the power, to do more joins at the
same time. Additionally to what Merge can do, this function also makes
use of the Proc SQL possibility to join datasets on different variable
names:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>MyData_Merged <span class="ot">&lt;-</span> <span class="fu">multi_join</span>(<span class="at">data_frames =</span> <span class="fu">list</span>(MyData_A, MyData_B, MyData_C),</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>                            <span class="at">on  =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="st">"d"</span>, <span class="st">"e"</span>)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>                            <span class="at">how =</span> <span class="st">"left"</span>)</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="co"># Instead of "left" you can assign any of the above join methods.</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="co"># To join on differently named variables, you can write the function like this:</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>MyData_Merged <span class="ot">&lt;-</span> <span class="fu">multi_join</span>(<span class="fu">list</span>(MyData_A, MyData_B, MyData_C),</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>                            <span class="at">on =</span> <span class="fu">list</span>(<span class="at">MyData_A =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>),</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>                                      <span class="at">MyData_B =</span> <span class="fu">c</span>(<span class="st">"var1"</span>, <span class="st">"var2"</span>),</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>                                      <span class="at">MyData_C =</span> <span class="fu">c</span>(<span class="st">"key1"</span>, <span class="st">"key2"</span>)))</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="splitting-datasets">Splitting Datasets<a class="anchor" aria-label="anchor" href="#splitting-datasets"></a>
</h2>
<p>SAS is capable of splitting up a dataset into multiple new ones. With
the ‘Output’ function one can - among other things - explicitly tell SAS
which observation to output into which dataset. Instead of subsetting
the same dataset multiple times manually, you can subset it multiple
times at once:</p>
<pre class="sas"><code>Data Work.MyData_Male
     Work.MyData_Female;
    Set Work.MyData;

             If Sex = 1 Then Output Work.MyData_Male;
        Else If Sex = 2 Then Output Work.MyData_Female;

Run;</code></pre>
<p>qol offers two functions <code><a href="../reference/split_by.html">split_by_var()</a></code> and
<code><a href="../reference/split_by.html">split_by_condition()</a></code> which split up data frames into a list
of multiple new ones:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Using just the expressions of a single variable</span></span>
<span><span class="va">MyData_List</span> <span class="op">&lt;-</span> <span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/split_by.html">split_by_var</a></span><span class="op">(</span><span class="va">Sex</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or using conditions</span></span>
<span><span class="va">MyData_List</span> <span class="op">&lt;-</span> <span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/split_by.html">split_by_condition</a></span><span class="op">(</span><span class="va">Sex</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">Age</span> <span class="op">&lt;</span>  <span class="fl">18</span>,</span>
<span>                                            <span class="va">Sex</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">&amp;</span> <span class="va">Age</span> <span class="op">&gt;=</span> <span class="fl">18</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="keepdrop">Keep/Drop<a class="anchor" aria-label="anchor" href="#keepdrop"></a>
</h2>
<p>This is probably the least special one, but ‘Keep’ and ‘Drop’ share
the same writing style and don’t require a minus sign (in case of
‘Drop’):</p>
<pre class="sas"><code>Data Work.MyData_KeepDrop;
    Set Work.MyData;

        Keep a b c d;
        Drop a b c d;

Run;</code></pre>
<p>The qol <code><a href="../reference/keep_dropp.html">keep()</a></code> and <code><a href="../reference/keep_dropp.html">dropp()</a></code> (drop was
already taken, so the additional p is intentional ;-) ), are written
alike:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MyData_KeepDrop</span> <span class="op">&lt;-</span> <span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/keep_dropp.html">keep</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span>, <span class="va">c</span>, <span class="va">d</span><span class="op">)</span></span>
<span><span class="va">MyData_KeepDrop</span> <span class="op">&lt;-</span> <span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/keep_dropp.html">dropp</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span>, <span class="va">c</span>, <span class="va">d</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="more-on-tabulation">More On Tabulation<a class="anchor" aria-label="anchor" href="#more-on-tabulation"></a>
</h2>
<p>Sometimes you probably don’t want to create a big, fully styled table
and just need a small and basic one for a quick overview. The SAS
procedure Proc Freq offers tools to produce simple frequencies of single
variables. The code is as straight forward as this:</p>
<pre class="sas"><code>Proc Freq Data = Work.MyData;

    Table Age;

Run;</code></pre>
<p>The function <code><a href="../reference/frequencies.html">frequencies()</a></code> does the same like this:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># You can just output a quick ASCII style table in the console</span></span>
<span><span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/frequencies.html">frequencies</a></span><span class="op">(</span><span class="va">Age</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or a fully styled Excel table like this</span></span>
<span><span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/frequencies.html">frequencies</a></span><span class="op">(</span><span class="va">Age</span>, output <span class="op">=</span> <span class="st">"excel"</span><span class="op">)</span></span></code></pre></div>
<p>Proc Freq is also capable of producing cross tables. Just an asterisk
between two variables is neccessary:</p>
<pre class="sas"><code>Proc Freq Data = Work.MyData;

    Table Age * Sex;

Run;</code></pre>
<p>To reproduce this, the function <code><a href="../reference/crosstabs.html">crosstabs()</a></code> comes into
play:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Again in ASCII style</span></span>
<span><span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/crosstabs.html">crosstabs</a></span><span class="op">(</span><span class="va">Age</span>, <span class="va">Sex</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or in the fully styled Excel version</span></span>
<span><span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/crosstabs.html">crosstabs</a></span><span class="op">(</span><span class="va">Age</span>, <span class="va">Sex</span>, output <span class="op">=</span> <span class="st">"excel"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># By the way: if you want to produce multiple structurally identical tables</span></span>
<span><span class="co"># by the expressions of another variable, you can do so like this:</span></span>
<span><span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/frequencies.html">frequencies</a></span><span class="op">(</span><span class="va">Age</span>, by <span class="op">=</span> <span class="va">Education</span><span class="op">)</span></span>
<span><span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/crosstabs.html">crosstabs</a></span><span class="op">(</span><span class="va">Age</span>, <span class="va">Sex</span>, by <span class="op">=</span> <span class="va">Education</span><span class="op">)</span></span></code></pre></div>
<p>There are several options to customize the output tables. You can for
example add titles and footnotes or put some labels on the variable
expressions:</p>
<pre class="sas"><code>Proc Format Library = Work;

    Value AgeGroup
        00 - 17 = 'under 18'
        18 - 24 = '18 to under 25'
        25 - 54 = '25 to under 55'
        55 - 64 = '55 to under 65'
        65 - 99 = '65 and older';

Run;

Title1    "This is a title";
Footnote1 "This is a footnote";
        
Proc Freq Data = Work.MyData;

    Table Age;
        
    Format Age AgeGroup.;

Run;</code></pre>
<p>And in R you do it like this:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">AgeGroup.</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/formats.html">discrete_format</a></span><span class="op">(</span></span>
<span>    <span class="st">"under 18"</span>       <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">17</span>,</span>
<span>    <span class="st">"18 to under 25"</span> <span class="op">=</span> <span class="fl">18</span><span class="op">:</span><span class="fl">24</span>,</span>
<span>    <span class="st">"25 to under 55"</span> <span class="op">=</span> <span class="fl">25</span><span class="op">:</span><span class="fl">54</span>,</span>
<span>    <span class="st">"55 to under 65"</span> <span class="op">=</span> <span class="fl">55</span><span class="op">:</span><span class="fl">64</span>,</span>
<span>    <span class="st">"65 and older"</span>   <span class="op">=</span> <span class="fl">65</span><span class="op">:</span><span class="fl">99</span><span class="op">)</span></span>
<span></span>
<span><span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/frequencies.html">frequencies</a></span><span class="op">(</span><span class="va">Age</span>,</span>
<span>                      formats   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Age <span class="op">=</span> <span class="va">AgeGroup.</span><span class="op">)</span>,</span>
<span>                      titles    <span class="op">=</span> <span class="st">"This is a title"</span>,</span>
<span>                      footnotes <span class="op">=</span> <span class="st">"This is a footnote"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="export-data-frames-with-style">Export Data Frames With Style<a class="anchor" aria-label="anchor" href="#export-data-frames-with-style"></a>
</h2>
<p>There are occasions when you don’t want to tabulate your data, but
just print out the data frame you put together. There are multiple ways
to do this, Proc Export is probably the most straight forward one:</p>
<pre class="sas"><code>Proc Export Data = Work.MyData;

    Outfile = "C:\MyFile.xlsx";
    DBMS = xlsx;

Run;</code></pre>
<p>This in itself is no revolution, many R packages already can do this.
But to combine the simplicity of this export with the simplicity of the
already established styling options from the tabulation functions,
offers new options:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MyData</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/export_with_style.html">export_with_style</a></span><span class="op">(</span>titles    <span class="op">=</span> <span class="st">"This is a title"</span>,</span>
<span>                            footnotes <span class="op">=</span> <span class="st">"This is a footnote"</span>,</span>
<span>                            style     <span class="op">=</span> <span class="fu"><a href="../reference/excel_output_style.html">excel_output_style</a></span><span class="op">(</span>header_back_color <span class="op">=</span> <span class="st">"0000FF"</span>,</span>
<span>                                                           header_font_color <span class="op">=</span> <span class="st">"FF0000"</span>,</span>
<span>                                                           font              <span class="op">=</span> <span class="st">"Times New Roman"</span>,</span>
<span>                                                           title_font_size   <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>By the way: All tabulation functions and the above export function
from the qol package generate the named regions ‘table’ and ‘data’ in
the Excel output, which can easily be read back in with the help of the
<a href="https://github.com/JanMarvin/openxlsx2" class="external-link">openxlsx2</a>
package:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">MyData</span> <span class="op">&lt;-</span> <span class="fu">wb_to_df</span><span class="op">(</span>file  <span class="op">=</span> <span class="st">"C:/MyFile.xlsx"</span>,</span>
<span>                   sheet <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                   named_region <span class="op">=</span> <span class="st">"data"</span><span class="op">)</span></span></code></pre></div>
<p>These are just very basic examples. For further details you can look
up the functions in the <a href="https://s3rdia.github.io/qol/reference/index.html">reference</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tim Siebenmorgen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
