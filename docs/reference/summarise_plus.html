<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Fast and Powerful yet Simple to Use Summarise — summarise_plus • qol</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fast and Powerful yet Simple to Use Summarise — summarise_plus"><meta name="description" content="summarise_plus() creates a new aggregated data table with the desired grouping.
It can output only the deepest nested combination of the grouping variables (default)
or you can also output every possible combination of the grouping variables at once,
with just one small change. Besides the normal summary functions like sum, mean
or median, you can also calculate their respective weighted version by just
setting a weight variable."><meta property="og:description" content="summarise_plus() creates a new aggregated data table with the desired grouping.
It can output only the deepest nested combination of the grouping variables (default)
or you can also output every possible combination of the grouping variables at once,
with just one small change. Besides the normal summary functions like sum, mean
or median, you can also calculate their respective weighted version by just
setting a weight variable."><meta property="og:image" content="https://s3rdia.github.io/qol/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">qol</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/SAS_compare.html">How Does qol Compare to SAS?</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/s3rdia/qol/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Fast and Powerful yet Simple to Use Summarise</h1>
      <small class="dont-index">Source: <a href="https://github.com/s3rdia/qol/blob/HEAD/R/summarise_plus.R" class="external-link"><code>R/summarise_plus.R</code></a></small>
      <div class="d-none name"><code>summarise_plus.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>summarise_plus()</code> creates a new aggregated data table with the desired grouping.
It can output only the deepest nested combination of the grouping variables (default)
or you can also output every possible combination of the grouping variables at once,
with just one small change. Besides the normal summary functions like sum, mean
or median, you can also calculate their respective weighted version by just
setting a weight variable.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">summarise_plus</span><span class="op">(</span></span>
<span>  <span class="va">data_frame</span>,</span>
<span>  class <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">values</span>,</span>
<span>  statistics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sum"</span>, <span class="st">"freq"</span><span class="op">)</span>,</span>
<span>  formats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  weight <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nesting <span class="op">=</span> <span class="st">"deepest"</span>,</span>
<span>  merge_back <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  monitor <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  notes <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data-frame">data_frame<a class="anchor" aria-label="anchor" href="#arg-data-frame"></a></dt>
<dd><p>A data frame to summarise.</p></dd>


<dt id="arg-class">class<a class="anchor" aria-label="anchor" href="#arg-class"></a></dt>
<dd><p>A vector containing all grouping variables.</p></dd>


<dt id="arg-values">values<a class="anchor" aria-label="anchor" href="#arg-values"></a></dt>
<dd><p>A vector containing all variables that should be summarised.</p></dd>


<dt id="arg-statistics">statistics<a class="anchor" aria-label="anchor" href="#arg-statistics"></a></dt>
<dd><p>Available functions:</p><ul><li><p>"sum"       -&gt; Weighted and unweighted sum</p></li>
<li><p>"sum_wgt"   -&gt; Sum of all weights</p></li>
<li><p>"freq"      -&gt; Unweighted frequency</p></li>
<li><p>"freq_g0"   -&gt; Unweighted frequency of all values greater than zero</p></li>
<li><p>"pct_group" -&gt; Weighted and unweighted percentages within the respective group</p></li>
<li><p>"pct_total" -&gt; Weighted and unweighted percentages compared to the grand total</p></li>
<li><p>"mean"      -&gt; Weighted and unweighted mean</p></li>
<li><p>"median"    -&gt; Weighted and unweighted median</p></li>
<li><p>"mode"      -&gt; Weighted and unweighted mode</p></li>
<li><p>"min"       -&gt; Minimum</p></li>
<li><p>"max"       -&gt; Maximum</p></li>
<li><p>"sd"        -&gt; Weighted and unweighted standard deviation</p></li>
<li><p>"variance"  -&gt; Weighted and unweighted standard variance</p></li>
<li><p>"first"     -&gt; First value</p></li>
<li><p>"last"      -&gt; Last value</p></li>
<li><p>"pn"        -&gt; Weighted and unweighted percentiles (any p1, p2, p3, ... possible)</p></li>
<li><p>"missing"   -&gt; Missings generated by the value variables</p></li>
</ul></dd>


<dt id="arg-formats">formats<a class="anchor" aria-label="anchor" href="#arg-formats"></a></dt>
<dd><p>A list in which is specified which formats should be applied to which
class variables.</p></dd>


<dt id="arg-types">types<a class="anchor" aria-label="anchor" href="#arg-types"></a></dt>
<dd><p>A character vector specifying the different combinations of group
variables which should be computed when using nesting = "all". If left empty all
possible combinations will be computed.</p></dd>


<dt id="arg-weight">weight<a class="anchor" aria-label="anchor" href="#arg-weight"></a></dt>
<dd><p>Put in a weight variable to compute weighted results.</p></dd>


<dt id="arg-nesting">nesting<a class="anchor" aria-label="anchor" href="#arg-nesting"></a></dt>
<dd><p>The predefined value is "deepest" meaning that only the fully
nested version of all class variables will be computed. If set to "all", all
possible combinations will be computed in one data table. The option "single"
only outputs the ungrouped summary of all class variables in one data table.</p></dd>


<dt id="arg-merge-back">merge_back<a class="anchor" aria-label="anchor" href="#arg-merge-back"></a></dt>
<dd><p>Newly summarised variables can be merged back to the original
data frame if TRUE. Only works if nested = "deepest and no formats are defined.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>FALSE by default. If TRUE removes all NA values from the class variables.</p></dd>


<dt id="arg-monitor">monitor<a class="anchor" aria-label="anchor" href="#arg-monitor"></a></dt>
<dd><p>FALSE by default. If TRUE outputs two charts to visualize the
functions time consumption.</p></dd>


<dt id="arg-notes">notes<a class="anchor" aria-label="anchor" href="#arg-notes"></a></dt>
<dd><p>TRUE by default. Prints notifications about NA values produced by
class variables during summarise.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a summarised data table.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>summarise_plus()</code> is based on the 'SAS' procedure Proc Summary, which provides
efficient and readable ways to perform complex aggregations.</p>
<p>Normally you would compute new categorical variables beforehand - probably even in
different forms, if you wanted to have different categorizations - and bloat up
the data set. After all this recoding footwork you could finally use multiple
summaries to compute all the stats you need to then put them back together. With this
function this is no more necessary.</p>
<p>In <code>summarise_plus()</code> you put in the original data frame and let the recoding happen
via format containers. This is very efficient, since new variables and categories
are only created just before the summarise happens.</p>
<p>Additionally you can specify whether you only want to produce the all nested version
of all group variables or whether you want to produce every possible combination in
one go. All with a single option.</p>
<p>The function is optimized to always take the fastest route, depending on the options
specified.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Creating formats: <code><a href="formats.html">discrete_format()</a></code> and <code><a href="formats.html">interval_format()</a></code>.</p>
<p>Functions that also make use of formats: <code><a href="frequencies.html">frequencies()</a></code>, <code><a href="crosstabs.html">crosstabs()</a></code>,
<code><a href="any_table.html">any_table()</a></code>, <code><a href="recode.html">recode()</a></code>, <code><a href="recode.html">recode_multi()</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># Example formats</span></span>
<span><span class="va">age.</span> <span class="op">&lt;-</span> <span class="fu"><a href="formats.html">discrete_format</a></span><span class="op">(</span></span>
<span>    <span class="st">"Total"</span>          <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">100</span>,</span>
<span>    <span class="st">"under 18"</span>       <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">17</span>,</span>
<span>    <span class="st">"18 to under 25"</span> <span class="op">=</span> <span class="fl">18</span><span class="op">:</span><span class="fl">24</span>,</span>
<span>    <span class="st">"25 to under 55"</span> <span class="op">=</span> <span class="fl">25</span><span class="op">:</span><span class="fl">54</span>,</span>
<span>    <span class="st">"55 to under 65"</span> <span class="op">=</span> <span class="fl">55</span><span class="op">:</span><span class="fl">64</span>,</span>
<span>    <span class="st">"65 and older"</span>   <span class="op">=</span> <span class="fl">65</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sex.</span> <span class="op">&lt;-</span> <span class="fu"><a href="formats.html">discrete_format</a></span><span class="op">(</span></span>
<span>    <span class="st">"Total"</span>  <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,</span>
<span>    <span class="st">"Male"</span>   <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    <span class="st">"Female"</span> <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">income.</span> <span class="op">&lt;-</span> <span class="fu"><a href="formats.html">interval_format</a></span><span class="op">(</span></span>
<span>    <span class="st">"Total"</span>              <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">99999</span>,</span>
<span>    <span class="st">"below 500"</span>          <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">499</span>,</span>
<span>    <span class="st">"500 to under 1000"</span>  <span class="op">=</span> <span class="fl">500</span><span class="op">:</span><span class="fl">999</span>,</span>
<span>    <span class="st">"1000 to under 2000"</span> <span class="op">=</span> <span class="fl">1000</span><span class="op">:</span><span class="fl">1999</span>,</span>
<span>    <span class="st">"2000 and more"</span>      <span class="op">=</span> <span class="fl">2000</span><span class="op">:</span><span class="fl">99999</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example data frame</span></span>
<span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="dummy_data.html">dummy_data</a></span><span class="op">(</span><span class="fl">1000</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Call function</span></span>
<span><span class="va">all_nested</span> <span class="op">&lt;-</span> <span class="va">my_data</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise_plus</span><span class="op">(</span>class      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">sex</span>, <span class="va">age</span><span class="op">)</span>,</span>
<span>                   values     <span class="op">=</span> <span class="va">income</span>,</span>
<span>                   statistics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sum"</span>, <span class="st">"pct_group"</span>, <span class="st">"pct_total"</span>, <span class="st">"sum_wgt"</span>, <span class="st">"freq"</span><span class="op">)</span>,</span>
<span>                   formats    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sex <span class="op">=</span> <span class="va">sex.</span>, age <span class="op">=</span> <span class="va">age.</span><span class="op">)</span>,</span>
<span>                   weight     <span class="op">=</span> <span class="va">weight</span>,</span>
<span>                   nesting    <span class="op">=</span> <span class="st">"deepest"</span>,</span>
<span>                   na.rm      <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">all_possible</span> <span class="op">&lt;-</span> <span class="va">my_data</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise_plus</span><span class="op">(</span>class      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">sex</span>, <span class="va">age</span>, <span class="va">income</span><span class="op">)</span>,</span>
<span>                   values     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">probability</span><span class="op">)</span>,</span>
<span>                   statistics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sum"</span>, <span class="st">"p1"</span>, <span class="st">"p99"</span>, <span class="st">"min"</span>, <span class="st">"max"</span>, <span class="st">"freq"</span>, <span class="st">"freq_g0"</span><span class="op">)</span>,</span>
<span>                   formats    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sex    <span class="op">=</span> <span class="va">sex.</span>,</span>
<span>                                     age    <span class="op">=</span> <span class="va">age.</span>,</span>
<span>                                     income <span class="op">=</span> <span class="va">income.</span><span class="op">)</span>,</span>
<span>                   weight     <span class="op">=</span> <span class="va">weight</span>,</span>
<span>                   nesting    <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>                   na.rm      <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Formats can also be passed as characters</span></span>
<span><span class="va">single</span> <span class="op">&lt;-</span> <span class="va">my_data</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise_plus</span><span class="op">(</span>class      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">age</span>, <span class="va">sex</span><span class="op">)</span>,</span>
<span>                   values     <span class="op">=</span> <span class="va">weight</span>,</span>
<span>                   statistics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sum"</span>, <span class="st">"mean"</span><span class="op">)</span>,</span>
<span>                   formats    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sex <span class="op">=</span> <span class="st">"sex."</span>, age <span class="op">=</span> <span class="st">"age."</span><span class="op">)</span>,</span>
<span>                   nesting    <span class="op">=</span> <span class="st">"single"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">merge_back</span> <span class="op">&lt;-</span> <span class="va">my_data</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise_plus</span><span class="op">(</span>class      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">age</span>, <span class="va">sex</span><span class="op">)</span>,</span>
<span>                   values     <span class="op">=</span> <span class="va">weight</span>,</span>
<span>                   statistics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sum"</span>, <span class="st">"mean"</span><span class="op">)</span>,</span>
<span>                   nesting    <span class="op">=</span> <span class="st">"deepest"</span>,</span>
<span>                   merge_back <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">certain_types</span> <span class="op">&lt;-</span> <span class="va">my_data</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise_plus</span><span class="op">(</span>class      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">sex</span>, <span class="va">age</span><span class="op">)</span>,</span>
<span>                   values     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">probability</span><span class="op">)</span>,</span>
<span>                   statistics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sum"</span>, <span class="st">"mean"</span>, <span class="st">"freq"</span><span class="op">)</span>,</span>
<span>                   formats    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sex <span class="op">=</span> <span class="va">sex.</span>,</span>
<span>                                     age <span class="op">=</span> <span class="va">age.</span><span class="op">)</span>,</span>
<span>                   types      <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"year"</span>, <span class="st">"year + age"</span>, <span class="st">"age + sex"</span><span class="op">)</span>,</span>
<span>                   weight     <span class="op">=</span> <span class="va">weight</span>,</span>
<span>                   nesting    <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>                   na.rm      <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tim Siebenmorgen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

